\doxysection{user.\+h}
\hypertarget{user_8h_source}{}\label{user_8h_source}\index{user/user.h@{user/user.h}}
\mbox{\hyperlink{user_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ USER\_H}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ USER\_H}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}../flights/flight\_connection.h"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}../luggage/luggage.h"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}mongocxx/client.hpp"{}}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_admin}{Admin}};}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_user}{User}}\ \{}
\DoxyCodeLine{00022\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00023\ \ \ mongocxx::database\ \_db\_;\ }
\DoxyCodeLine{00024\ \ \ mongocxx::collection\ \_collection\_;\ }
\DoxyCodeLine{00025\ \ \ std::string\ \_password\_;\ }
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00028\ \ \ mongocxx::client\ \&\mbox{\hyperlink{class_user_a73d09e7bca8ef877e55ad22a46b86e7b}{\_client}};\ }
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00035\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_user_a1f2ef1ad9f6e0f6fe9573f4cdfe95a82}{User}}(mongocxx::client\ \&client);}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00040\ \ \ \mbox{\hyperlink{class_user}{User}}(std::string\ username,\ std::string\ email,\ \textcolor{keywordtype}{double}\ discount,}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ std::string\ discount\_type,\ std::string\ premium\_card,}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ std::string\ payment\_method,\ mongocxx::client\ \&client,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ std::string\ profession,\ std::string\ registration\_date,}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ money\_spent,\ \textcolor{keywordtype}{double}\ money\_saved,}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ ticket\_bought,\ std::vector<bsoncxx::document::value>\ user\_flights,\ \textcolor{keywordtype}{bool}\ is\_admin);}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ std::string\ \mbox{\hyperlink{class_user_a71fccb751d45776c7a9d902df993a6cc}{username\_}};\ }
\DoxyCodeLine{00048\ \ \ std::string\ \mbox{\hyperlink{class_user_a4e772001cca7bd702dd6bb77c2546a25}{profession\_}};\ }
\DoxyCodeLine{00049\ \ \ std::string\ \mbox{\hyperlink{class_user_a8ab27ed203bf2c31929c5a545fd008f6}{email\_}};\ }
\DoxyCodeLine{00050\ \ \ std::string\ \mbox{\hyperlink{class_user_a6d1d6839a5c122c8fd9548e5710e6a1f}{discount\_type\_}};\ }
\DoxyCodeLine{00051\ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{class_user_ac23c35d2da866481b8391fb923f25058}{discount\_}};\ }
\DoxyCodeLine{00052\ \ \ std::string\ \mbox{\hyperlink{class_user_a6d9232b3ef1850e31a645c9e9490660c}{premium\_card\_}};\ }
\DoxyCodeLine{00053\ \ \ std::string\ \mbox{\hyperlink{class_user_a6a8e2c3e76d2cd1b918e0ae302d6a9e3}{payment\_method\_}};\ }
\DoxyCodeLine{00054\ \ \ std::string\ \mbox{\hyperlink{class_user_a94ae0c2d11df44b7e26d14865e0d5a32}{registration\_date\_}};\ }
\DoxyCodeLine{00055\ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{class_user_a582c6c47db029474dff9d486e6ecae2d}{money\_spent\_}};\ }
\DoxyCodeLine{00056\ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{class_user_a44b904ccb9938095295042f34a603911}{money\_saved\_}};\ }
\DoxyCodeLine{00057\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_user_a0cabd272e6db275f1a86ef7af5303944}{ticket\_bought\_}};\ }
\DoxyCodeLine{00058\ \ \ std::vector<bsoncxx::document::value>\ \mbox{\hyperlink{class_user_a922dc714b892c54dea75ef260932488a}{user\_flights\_}};\ }
\DoxyCodeLine{00059\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_user_aed2a50537d9abcb1d3024953f7910a55}{is\_admin\_}};\ }
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_a09a8c48721b222e446ff84ba93bd5699}{Reset}}();\ }
\DoxyCodeLine{00062\ \ \ mongocxx::collection\ \&\mbox{\hyperlink{class_user_a024088095b8277b7a9b6d835151599fb}{GetCollection}}();\ }
\DoxyCodeLine{00063\ \ \ mongocxx::collection\ \mbox{\hyperlink{class_user_ab00c7b3289252e95a3fd10bca84d9682}{GetSpecificCollection}}(\textcolor{keyword}{const}\ std::string\ \&collection\_name);\ }
\DoxyCodeLine{00064\ \ \ std::string\ \mbox{\hyperlink{class_user_aa3447db463d01490433dba5e0af75b7a}{GetPassword}}();\ }
\DoxyCodeLine{00065\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_ad151aa858ae5061c07d898187d319eba}{SetPassword}}(\textcolor{keyword}{const}\ std::string\ \&password);\ }
\DoxyCodeLine{00066\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_a302802468f35cc7d1040b857e61574b4}{SetPremiumCard}}(\mbox{\hyperlink{class_user}{User}}\ \&user,\ \textcolor{keyword}{const}\ std::string\ \&card);\ }
\DoxyCodeLine{00067\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_aee9007351d2298c4eb020335a9a48b66}{SetBlik}}(\textcolor{keyword}{const}\ std::string\ \&payment\_method);\ }
\DoxyCodeLine{00068\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_a7d27b87cf45e4156827f7e0e366fa008}{SetVisa}}(\textcolor{keyword}{const}\ std::string\ \&card\_number,\ \textcolor{keyword}{const}\ std::string\ \&card\_cvv);\ }
\DoxyCodeLine{00069\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_adb514dec82fe828f15d54f8dcbbe8011}{ChangeUsername}}(\textcolor{keyword}{const}\ std::string\ \&username);\ }
\DoxyCodeLine{00070\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_a2a6276a9f8425eaface7c773b2d4e3af}{ChangeEmail}}(\textcolor{keyword}{const}\ std::string\ \&email);\ }
\DoxyCodeLine{00071\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_af9834dc2ac3a1abfe7a05c4a8c2ffb2a}{ChangePassword}}(\textcolor{keyword}{const}\ std::string\ \&password);\ }
\DoxyCodeLine{00072\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_adc43adbd6db6dc711724c2b7d1932d37}{SetDiscount}}(\textcolor{keywordtype}{double}\ discount,\ \textcolor{keyword}{const}\ std::string\ \&discount\_type);\ }
\DoxyCodeLine{00073\ \ \ [[nodiscard]]\ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{class_user_a25219f394809bedb7c943fd559515a1f}{GetDiscount}}()\ \textcolor{keyword}{const};\ }
\DoxyCodeLine{00074\ \ \ [[nodiscard]]\ std::string\ \mbox{\hyperlink{class_user_a31c7ed7cce904330276213f8a90251fb}{RecognizeDiscount}}()\ \textcolor{keyword}{const};\ }
\DoxyCodeLine{00075\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_a7144c4ca6c875eae6ecf8cd2228707d9}{AddTicketToUser}}(\textcolor{keyword}{const}\ std::vector<int>\ \&seats,}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_flight_connection}{FlightConnection}}\ \&flight\_connection);\ }
\DoxyCodeLine{00077\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_a907a3ac4840adb9a86b33651d46c51f3}{UpdateMoneySaved}}(\textcolor{keywordtype}{double}\ normal\_price,\ \textcolor{keywordtype}{double}\ discount\_price);\ }
\DoxyCodeLine{00078\ \ \ \mbox{\hyperlink{class_admin}{Admin}}\ *\mbox{\hyperlink{class_user_a27d56a4a6d9ba838715975d919f2d2a0}{LoginAsAdmin}}();\ }
\DoxyCodeLine{00079\ \ \ [[nodiscard]]\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_user_a90c1cbddc9c3b2e0136ef19d3a9336c1}{CheckIfAdmin}}()\ \textcolor{keyword}{const};\ }
\DoxyCodeLine{00080\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_a284898f1c11219fd04fc0718a93430a9}{SetIsAdmin}}(\textcolor{keywordtype}{bool}\ is\_administrator)\ \{\ \mbox{\hyperlink{class_user_aed2a50537d9abcb1d3024953f7910a55}{User::is\_admin\_}}\ =\ is\_administrator;\ \}\ }
\DoxyCodeLine{00081\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_af04ceb8ce499e5d54e0119c3221a8606}{LuggageCheckin}}(\textcolor{keywordtype}{int}\ flight\_number);\ }
\DoxyCodeLine{00082\ \ \ mongocxx::cursor\ \mbox{\hyperlink{class_user_a868b74150c8c51bb0f0d20e3ae45dcb4}{FindUserInDatabase}}();\ }
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00090\ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00091\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_user_ae787baf324004e9457afb820ae52c325}{UpdateUserInDatabase}}(}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&value\_in\_database,}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \textcolor{keyword}{const}\ T\ \&value\_to\_set)\ \{}
\DoxyCodeLine{00094\ \ \ \ \ bsoncxx::document::value\ update\_builder\ =\ bsoncxx::builder::basic::make\_document(}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ bsoncxx::builder::basic::kvp(\textcolor{stringliteral}{"{}\$set"{}},\ bsoncxx::builder::basic::make\_document(}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ bsoncxx::builder::basic::kvp(value\_in\_database,\ value\_to\_set))));}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ bsoncxx::document::view\ update\_view\ =\ update\_builder.view();}
\DoxyCodeLine{00099\ \ \ \ \ bsoncxx::document::value\ filter\_builder\_email\_password\ =\ bsoncxx::builder::basic::make\_document(}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ bsoncxx::builder::basic::kvp(\textcolor{stringliteral}{"{}email\_"{}},\ \mbox{\hyperlink{class_user_a8ab27ed203bf2c31929c5a545fd008f6}{email\_}}),}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ bsoncxx::builder::basic::kvp(\textcolor{stringliteral}{"{}password"{}},\ \mbox{\hyperlink{class_user_aa3447db463d01490433dba5e0af75b7a}{GetPassword}}()));}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ bsoncxx::document::view\ filter\_view\_email\_password\ =\ filter\_builder\_email\_password.view();}
\DoxyCodeLine{00104\ \ \ \ \ \_collection\_.update\_one(filter\_view\_email\_password,\ update\_view);}
\DoxyCodeLine{00105\ \ \ \}}
\DoxyCodeLine{00106\ \};}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ USER\_H}}

\end{DoxyCode}
